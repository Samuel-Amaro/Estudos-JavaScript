<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>Rewrite Using async/await</title>
</head>
<body>

    <script>

        /*function loadJson(url) {
            return fetch(url).then(response => {
                if(response.status == 200) {
                    return response.json();
                }else{
                    throw new Error(response.status);
                }
            });
        }

        loadJson('https://javascript.info/no-such-user.json').catch(console.log); //Error: 404
        */

        //rescrevendo - usando async e await
        async function loadJson(url) {
            try {
                let response = await fetch(url);
                if(response.status === 200) {
                    let json = await response.json();
                    return json;
                }else{
                    throw new Error(response.status);
                }
            } catch (error) {
                console.log(error);
            }
        }

        try {
            let result = loadJson('https://javascript.info/no-such-user.json');    
        } catch (error) {
            console.log(error);
        }
        
        
        
        
    </script>

</body>
</html>